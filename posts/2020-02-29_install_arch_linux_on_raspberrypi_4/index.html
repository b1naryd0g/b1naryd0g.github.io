<!DOCTYPE html>
<html lang='en' >
  <head>
  <title>Raspberry pi に arch linux をインストールする | Kimagure Tech</title>
  <meta charset='utf-8'>
  <meta name = 'viewport' content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'>
  <meta http-equiv = 'X-UA-Compatible' content = 'IE=edge'>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-45001119-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-45001119-4');
</script>

<meta name = 'keywords' content = 'Kimagure Tech'>
<meta property = 'og:locale' content = 'en_US' />
<meta property = 'og:type' content = 'article' />
<meta property = 'og:title' content = 'Raspberry Pi に Arch Linux をインストールする' />
<meta property = 'og:description' content = 'Raspberry Pi 4 (RPI) を購入したので Arch を入れて遊んでみることにしました。多くの方が Raspberry Pi に Linux をインストールする記事を書かれていますので、あまり私がこの書く意味はありませんが、このブログでは低品質な記事でもアウトプットすることを目標にして …'>
<meta property = 'og:url' content = 'https://ruitrek.github.io/posts/2020-02-29_install_arch_linux_on_raspberrypi_4/' />
<meta property = 'og:image' content = 'https://ruitrek.github.io/images/harrison-broadbent-VOz0gV9HC0I-unsplash.jpg'/>
<link rel='apple-touch-icon' sizes='180x180' href='https://ruitrek.github.io/images/icons/apple-touch-icon.png'>
<link rel='icon' type='image/png' sizes='32x32' href='https://ruitrek.github.io/images/icons/favicon-32x32.png'>
<link rel='icon' type='image/png' sizes='16x16' href='https://ruitrek.github.io/images/icons/favicon-16x16.png'>
<link rel='manifest' href='https://ruitrek.github.io/images/icons/site.webmanifest'>
<meta name='msapplication-TileColor' content='#da532c'>
<meta name='theme-color' content='#ffffff'>

  <link rel='canonical' href='https://ruitrek.github.io/posts/2020-02-29_install_arch_linux_on_raspberrypi_4/'>
  <link rel = 'stylesheet' href = 'https://ruitrek.github.io/css/main.4ebb88a90dcc1a92fe48536022cb5a7a29396580c778d2d8f504d7d09ae3f16def04f5d63f407e447114cde741e2fed602483edb8a72403023b61d6a04870d8e.css' integrity = 'sha512-TruIqQ3MGpL&#43;SFNgIstaeik5ZYDHeNLY9QTX0Jrj8W3vBPXWP0B&#43;RHEUzedB4v7WAkg&#43;24pyQDAjth1qBIcNjg=='>
</head>

  <body>
    <div class = 'nav-drop'>
  <div class = 'nav-body'>
      <a href = 'https://ruitrek.github.io/about/' class = 'nav_item'>About</a>
      <a href = 'https://ruitrek.github.io/' class = 'nav_item'>Blog</a>
      <a href = 'https://ruitrek.github.io/tags' class = 'nav_item'>Tag</a>
    <div class = 'nav-close'></div><div class = 'color_mode'>
<label for = 'mode'>Toggle Dark Mode</label>
<input type = 'checkbox' class = 'color_choice' id = 'mode'>
</div>

  </div>
</div><header class = 'nav' >
  <nav class = 'nav-menu'>
    <a href='https://ruitrek.github.io/' class = 'nav-brand nav_item'>Kimagure Tech</a>
    <div class = 'nav_bar-wrap'>
      <div class = 'nav_bar'></div>
    </div>
  </nav>
</header>


    <main>
      
  <div class = 'wrap mt post'>
    <div><p class = 'post_date pale'>29. February 2020</p>
      <h1 class = 'post_title'>Raspberry Pi に Arch Linux をインストールする</h1>
      <div class = 'post_body'>
        <div class = 'post_inner'>
        
          <img src = 'https://ruitrek.github.io/images/harrison-broadbent-VOz0gV9HC0I-unsplash.jpg' alt = 'harrison-broadbent-VOz0gV9HC0I-unsplash.jpg' class = 'post_thumbnail'>
        
          <p>Raspberry Pi 4 (RPI) を購入したので Arch を入れて遊んでみることにしました。多くの方が Raspberry Pi に Linux をインストールする記事を書かれていますので、あまり私がこの書く意味はありませんが、このブログでは低品質な記事でもアウトプットすることを目標にしているので自分への備忘録として残します。</p>
<h2 id="インストール方法について">インストール方法について</h2>
<p>RPI には一般的なマシンにあるような BIOS はありません。私は何も知らずにいきなり電源を入れて焦りました。
Arch の場合は tarball が配布されているので、別のマシンでそれを micro SD カード展開して起動する流れです。</p>
<p>SD カードのパーティショニングやファイルシステムの作成が必要ですので、別の Linux マシンでやるか VirtualBox などに SD カードをアタッチしてインストールするといいでしょう。
私は VirtualBox で Arch の LiveCD をブートしてインストールしました。</p>
<p>なお、ARM 版 Arch Linux は本家とは別のプロジェクトです。本家に厳し目の忠告がありますのでご注意ください。</p>
<blockquote>
<p>Warning: Support for the ARM architecture is provided by the Arch Linux ARM, which is a different project not supported by Arch Linux. Seek support on the Arch Linux ARM forums.
<a href="https://wiki.archlinux.org/index.php/Category:ARM_architecture">https://wiki.archlinux.org/index.php/Category:ARM_architecture</a></p>
</blockquote>
<p>ARM プロジェクトサイトはこちらです。</p>
<blockquote>
<p>Arch Linux ARM<br>
<a href="https://archlinuxarm.org/">https://archlinuxarm.org/</a></p>
</blockquote>
<p>RPI4 のインストール方法はこちらです。</p>
<blockquote>
<p>Raspberry Pi 4 | Arch Linux ARM<br>
<a href="https://archlinuxarm.org/platforms/armv8/broadcom/raspberry-pi-4">https://archlinuxarm.org/platforms/armv8/broadcom/raspberry-pi-4</a></p>
</blockquote>
<h2 id="パーティショニング">パーティショニング</h2>
<p><strong>インストール手順に書いてある通りに</strong> fdisk でパーティションを作成します。</p>
<h2 id="マウント">マウント</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">mkfs.vfat /dev/sda1
mkdir boot
mount /dev/sda1 boot

mkfs.ext4 /dev/sda2
mkdir root
mount /dev/sda2 root
</code></pre></td></tr></table>
</div>
</div><h2 id="tarball-のダウンロード">tarball のダウンロード</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">wget http://os.archlinuxarm.org/os/ArchLinuxARM-rpi-4-latest.tar.gz
wget http://os.archlinuxarm.org/os/ArchLinuxARM-rpi-4-latest.tar.gz.md5
md5sum -c ArchLinuxARM-rpi-latest.tar.gz.md5
</code></pre></td></tr></table>
</div>
</div><h2 id="tarball-の展開">tarball の展開</h2>
<p>必ず root で実行します。sudo ではなく root です。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">bsdtar -xpf ArchLinuxARM-rpi-4-latest.tar.gz -C root
sync
mv root/boot/* boot
umount boot root
</code></pre></td></tr></table>
</div>
</div><h2 id="起動と設定">起動と設定</h2>
<p>Micro SD カードを RPI に差し込んで起動します。無事に起動したら一安心ですね :) ssh かコンソールでログインしましょう。</p>
<ul>
<li>一般ユーザとして alarm (パスワード alarm) が用意されています</li>
<li>root のパスワードは root です</li>
</ul>
<p>どちらもパスワードは変えて運用することをおすすめします。</p>
<p>最後に pacman keyring を初期化して、鍵の初期設定をします。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">pacman-key --init
pacman-key --populate archlinuxarm
</code></pre></td></tr></table>
</div>
</div><h2 id="オプション-os-イメージのバックアップ">(オプション) OS イメージのバックアップ</h2>
<p>(わりとインストール手順が面倒でしたので) 私は dd で SD カードのイメージを取っておきました。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo diskutil umountDisk /dev/disk2
sudo dd if=/dev/disk2 | pbzip2 -9 &gt; rpi_archimg.bz2
</code></pre></td></tr></table>
</div>
</div><h2 id="インストール後の設定について">インストール後の設定について</h2>
<p>インストール後の手順についてはこちらをご参考くださればうれしいです。</p>
<p><a href="https://ruitrek.github.io/posts/2020-02-28_install_archlinux/#%e5%bf%85%e9%a0%88%e3%81%a7%e3%81%af%e3%81%aa%e3%81%84%e3%81%91%e3%81%a9%e3%82%84%e3%81%a3%e3%81%a6%e3%81%8a%e3%81%8f%e3%81%a8%e4%be%bf%e5%88%a9%e3%81%aa%e8%a8%ad%e5%ae%9a%e3%81%9f%e3%81%a1">必須ではないけどやっておくと便利な設定たち</a></p>
<h2 id="今後について">今後について</h2>
<p>今後は時間を見つけていろいろやっていきたいなーと思います。</p>
<ul>
<li>ストレージがあまっているので RAID の構成</li>
<li>Docker のインストール</li>
<li>TimeMachine with Docker</li>
</ul>
<p>などなど</p>
        </div>
        <div class ='post_extra mb-2'>
          <div class = 'copy'></div>

        </div>
        <div>
        
        </div>
      </div>
    </div>
    <a href = 'https://ruitrek.github.io/' class = 'post_nav'><span class = 'post_next'>The Latest</span></a>
  </div>

    </main>
    <footer class = 'footer wrap pale'>
  <p>&copy;&nbsp;<span class = 'year'></span>&nbsp;Kimagure Tech</p>
  <p class="attribution upcase">Designed by  <a href = 'https://twitter.com/ruitrek_' target = '_blank' title = 'Linkedin Profile' rel = 'nonopener'>ruitrek</a></p>
</footer>


<script src = 'https://ruitrek.github.io/js/index.min.b22eed013e9808ce72856c3d73aab473ee4137aabd0e54e4847e400f9f797377948a67ff786981bc1f3875845b922a1e68996b95c449b6cb7ecaa1def1eb287b.js'></script>

  </body>
</html>
